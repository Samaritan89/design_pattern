# 封装

封装的目的是将信息隐藏，一般有四种

1. 封装shuju

2. 封装实现

3. 封装类型

4. 封装变化

## 封装数据

在许多语言的对象系统中，封装数据是由语法解析来实现的，这些语言也许提供了`private`、`public`、`protected`等关键字来提供不同的访问权限。

但JavaScript并没有提供对这些关键字的支持，我们只能依赖变量的作用域来实现封装特性，而且只恩呢该模拟出`public`和`private`这两种封装性。

除了ES6中提供的`let`之外，一般我们通过函数来创建作用域

    var myObj = (function(){
        var __name = 'sven'; // 私有(private)变量
        return {
            getName: function(){ // 公有(public)方法
                return __name;
            }
        };
    })();

    console.log(myObj.getName()); // sven
    console.log(myObj.__name); // undefined

## 封装实现

有时候我们喜欢把封装等同于数据封装，但这是狭义的定义，封装的目的是将信息隐藏，封装应该被视为*任何形式的封装*，也就是说封装不仅仅是隐藏数据，还包括隐藏实现细节、设计细节以及隐藏对象的类型等。

从封装实现细节来讲，封装是的对象内部的变化对其它对象时透明的，对象对它自己行为负责，其它对象或用户都不关系它的内部实现。封装是的对象之间的耦合变松散，对象之间只通过暴露API来通信。我们可以随意修改对象的内部实现，只要对外的借口没有变化，就不会影响到程序的其它功能。

封装实现细节的例子非常多，拿迭代器来讲，迭代器的作用是在不暴露一个聚合对象内部表示的前提下，提供一种方式来顺序访问这个聚合对象。我们编写一个`each`函数，它的作用就是便利一个聚合对象，使用这个`each`函数的人不用关心它的内部是怎么实现的，只要提供的功能正确就可以。即使`each`函数修改了内部源代码，只要对外的接口或者调用方式没有变化，用户就不用关心它的内部实现的改变。
